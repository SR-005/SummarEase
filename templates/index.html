<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <title>SummarEase</title>
</head>
<body class="bgcustom container-fluid p-3">
    <h2 class="summarease text-center">SummarEase</h2>
    <h4 class="caption text-center mb-4">Too many words, too little time? SummarEase it!</h4>

    <p class="text-center uploadtext">Upload your file here and get the summary instantly</p>

    <form method="POST" enctype="multipart/form-data" class="mt-3">
        <div class="row justify-content-center">
            <div class="col-10 col-sm-8 col-md-4">
                <select class="form-select form-select-lg mb-3 custom-forum" id="inputTypeSelector" name="inputTypeSelector" aria-label="Select file type">
                    <option selected>Type of File to Summarize</option>
                    <option value="document">Document</option>
                    <option value="website">Website</option>
                    <option value="image">Image</option>
                </select>
            </div>
        </div>

        <div id="documentInput" style="display: none;">
            <p class="selecttext text-center">Select a PDF from your System</p>
            <div class="row g-2 justify-content-center">
                    <input class="form-control w-75" type="file" id="documentFile" name="documentFile" accept=".pdf">
                <div class="col-12 col-md-auto">
                    <button type="submit" class="btn btn-primary w-100">Summarize</button>
                </div>
            </div>
        </div>

        <div id="websiteInput" style="display: none;">
            <p class="selecttext text-center">Enter a Website URL</p>
            <div class="row g-2 justify-content-center">
                    <input type="url" class="form-control w-75" id="websiteURL" name="websiteURL" placeholder="https://example.com">
                <div class="col-12 col-md-auto">
                    <button type="submit" class="btn btn-primary w-100">Summarize</button>
                </div>
            </div>
        </div>

        <div id="imageInput" style="display: none;">
            <p class="selecttext text-center">Select an Image from your System</p>
            <div class="row g-2 justify-content-center">
                    <input type="file" class="form-control w-75" id="imageFile" name="imageFile" accept="image/*">
                <div class="col-12 col-md-auto">
                    <button type="submit" class="btn btn-primary w-100">Summarize</button>
                </div>
            </div>
        </div>   
    </form>

    {% if summary %}
    <div class="container my-4">
        <div id="summaryOutput" class="summary-box mx-auto">
            <h5>Summary:</h5>
            <p>{{ summary }}</p>
        </div>
    </div>
    {% endif %}



    <script>
        const selector = document.getElementById("inputTypeSelector");
        const documentInput = document.getElementById("documentInput");
        const websiteInput = document.getElementById("websiteInput");
        const imageInput = document.getElementById("imageInput");

        selector.addEventListener("change", function () {
            const selected = this.value;

            documentInput.style.display = "none";
            websiteInput.style.display = "none";
            imageInput.style.display = "none";

            if (selected === "document") {
                documentInput.style.display = "block";
            } else if (selected === "website") {
                websiteInput.style.display = "block";
            } else if (selected === "image") {
                imageInput.style.display = "block";
            }
        });
    </script>

</body>
</html>
